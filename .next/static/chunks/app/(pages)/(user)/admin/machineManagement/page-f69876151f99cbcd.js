(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7344],{5929:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var l=n(95155),r=n(35726),o=n(12115);let a=e=>{let{open:t,message:n,setOpen:a}=e,[i,s]=o.useState({vertical:"top",horizontal:"center"}),{vertical:d,horizontal:c}=i;return(0,l.jsx)(r.A,{anchorOrigin:{vertical:d,horizontal:c},open:t,onClose:()=>a(!1),autoHideDuration:2e3,message:n},d+c)}},31027:(e,t,n)=>{Promise.resolve().then(n.bind(n,47903))},33989:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var l,r=n(12115),o=n(52596),a=n(17472),i=n(13209),s=n(71116),d=n(23511),c=n(27011),u=n(75955),p=n(40680),m=n(10186),x=n(55170),f=n(90870);function h(e){return(0,f.Ay)("MuiInputAdornment",e)}let b=(0,x.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var v=n(95155);let A=e=>{let{classes:t,disablePointerEvents:n,hiddenLabel:l,position:r,size:o,variant:s}=e,d={root:["root",n&&"disablePointerEvents",r&&"position".concat((0,i.A)(r)),s,l&&"hiddenLabel",o&&"size".concat((0,i.A)(o))]};return(0,a.A)(d,h,t)},g=(0,u.default)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t["position".concat((0,i.A)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((0,p.A)(e=>{let{theme:t}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{["&.".concat(b.positionStart,"&:not(.").concat(b.hiddenLabel,")")]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}})),y=r.forwardRef(function(e,t){let n=(0,m.b)({props:e,name:"MuiInputAdornment"}),{children:a,className:i,component:u="div",disablePointerEvents:p=!1,disableTypography:x=!1,position:f,variant:h,...b}=n,y=(0,c.A)()||{},j=h;h&&y.variant,y&&!j&&(j=y.variant);let C={...n,hiddenLabel:y.hiddenLabel,size:y.size,disablePointerEvents:p,position:f,variant:j},I=A(C);return(0,v.jsx)(d.A.Provider,{value:null,children:(0,v.jsx)(g,{as:u,ownerState:C,className:(0,o.A)(I.root,i),ref:t,...b,children:"string"!=typeof a||x?(0,v.jsxs)(r.Fragment,{children:["start"===f?l||(l=(0,v.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"â€‹"})):null,a]}):(0,v.jsx)(s.A,{color:"textSecondary",children:a})})})})},47903:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var l=n(95155),r=n(12939),o=n(71116),a=n(68534),i=n(53267),s=n(12115),d=n(81453),c=n(75793),u=n(5929);function p(e){let{open:t,onClose:n,editMachineId:p,machine:m}=e,{control:x,errors:f,selectedImage:h,handleImageSelect:b,handleSubmit:v,handleAddMachine:A,isValid:g,message:y,openToast:j,setOpenToast:C,handelSetEditValues:I,currentMachineId:w,reset:D}=(0,c.A)();(0,s.useEffect)(()=>{console.log(m),m&&D({title:null==m?void 0:m.title,description:null==m?void 0:m.description,price:null==m?void 0:m.price,dailyIncome:null==m?void 0:m.dailyIncome,image:null==m?void 0:m.image,fee:null==m?void 0:m.fee,rentalDays:null==m?void 0:m.rentalDays})},[t,w,m]);let S=()=>{n()};return(0,l.jsxs)(r.Ay,{anchor:"right",open:t,onClose:S,PaperProps:{sx:{width:{xs:"100%",sm:400},bgcolor:"black",color:"#fff",p:3}},children:[(0,l.jsx)(u.A,{open:j,message:y,setOpen:C}),(0,l.jsx)(o.A,{variant:"h6",fontWeight:600,gutterBottom:!0}),(0,l.jsx)(d.A,{name:"title",label:"Title",control:x,errors:f,rules:{required:"Title is required"}}),(0,l.jsx)(d.A,{name:"description",label:"Descriptions",control:x,errors:f,multiline:!0,rows:4}),(0,l.jsxs)(a.A,{component:"label",variant:"outlined",fullWidth:!0,sx:{my:2,color:"#aaa",borderColor:"#555",textTransform:"none"},children:[h?h.name:"Choose Image",(0,l.jsx)("input",{type:"file",hidden:!0,onChange:b})]}),(0,l.jsx)(d.A,{name:"price",label:"Price",control:x,errors:f}),(0,l.jsx)(d.A,{name:"dailyIncome",label:"Daily Income",control:x,errors:f}),(0,l.jsx)(d.A,{name:"fee",label:"Fee",control:x,errors:f}),(0,l.jsx)(d.A,{name:"rentalDays",label:"Rental Days",control:x,errors:f,type:"number"}),(0,l.jsxs)(i.A,{display:"flex",justifyContent:"space-between",mt:4,gap:2,children:[(0,l.jsx)(a.A,{variant:"contained",fullWidth:!0,sx:{bgcolor:"#7367F0",textTransform:"none"},onClick:v(A),disabled:!g,children:"Add"}),(0,l.jsx)(a.A,{fullWidth:!0,sx:{color:"#a64445",textTransform:"none",bgcolor:"#3a2b2b"},onClick:S,children:"Discard"})]})]})}var m=n(9422),x=n(95838),f=n(5041),h=n(5289),b=n(62177),v=n(45516),A=n(62461);function g(){let e=localStorage.getItem("id");console.log("current id: ",e);let{data:t,isLoading:n,refetch:l,isError:r,isSuccess:o}=(0,x.useQuery)((0,h.zB)(String(e)));(0,s.useEffect)(()=>{if(p(),t){var e,n,l,r,o,a,i;p({title:null==t||null==(e=t.data)?void 0:e.title,description:null==t||null==(n=t.data)?void 0:n.description,dailyIncome:null==t||null==(l=t.data)?void 0:l.dailyIncome,price:null==t||null==(r=t.data)?void 0:r.price,fee:null==t||null==(o=t.data)?void 0:o.fee,rentalDays:null==t||null==(a=t.data)?void 0:a.rentalDays,image:null==t||null==(i=t.data)?void 0:i.image})}},[t]);let{control:a,handleSubmit:i,setValue:d,getValues:c,watch:u,reset:p,formState:{errors:m,isValid:g}}=(0,b.mN)({resolver:(0,A.t)(v.k),defaultValues:{title:"",description:"",price:"",dailyIncome:"",fee:"",rentalDays:0}}),y=u("image"),[j,C]=(0,s.useState)(!1),[I,w]=(0,s.useState)(""),{mutateAsync:D,isSuccess:S,isError:P,error:E}=(0,f.useMutation)({mutationFn:h.EI.mutationFn}),k=async t=>{if(!y){C(!0),w("Please uplaod an Image");return}try{w("");let{title:n,description:l,price:r,dailyIncome:o,fee:a,rentalDays:i}=t,s=new FormData;s.append("title",n),s.append("description",l),s.append("price",r),s.append("dailyIncome",o),s.append("fee",a),s.append("rentalDays",i),y&&s.append("image",y);let d=await D({body:s,id:String(e)});console.log(d),!0===d.success&&(C(!0),w("Product Edited Successfully"),window.location.reload()),!1===d.success&&(C(!0),w(d.success))}catch(e){C(!0),w(e.message)}};return{product:t,control:a,handleSubmit:i,setValue:d,getValues:c,watch:u,reset:p,errors:m,selectedImage:y,handleImageSelect:e=>{var t;let n=null==(t=e.target.files)?void 0:t[0];n&&d("image",n)},handleEditMachine:k,isValid:g,openToast:j,message:I,setOpenToast:C}}function y(e){let{open:t,onClose:n}=e,{product:s,control:c,handleSubmit:p,setValue:m,getValues:x,watch:f,reset:h,errors:b,selectedImage:v,handleImageSelect:A,handleEditMachine:y,isValid:j,openToast:C,message:I,setOpenToast:w}=g(),D=()=>{n()};return(0,l.jsxs)(r.Ay,{anchor:"right",open:t,onClose:D,PaperProps:{sx:{width:{xs:"100%",sm:400},bgcolor:"black",color:"#fff",p:3}},children:[(0,l.jsx)(u.A,{open:C,message:I,setOpen:w}),(0,l.jsx)(o.A,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Edit Machine"}),(0,l.jsx)(d.A,{name:"title",label:"Title",control:c,errors:b,rules:{required:"Title is required"}}),(0,l.jsx)(d.A,{name:"description",label:"Descriptions",control:c,errors:b,multiline:!0,rows:4}),(0,l.jsxs)(a.A,{component:"label",variant:"outlined",fullWidth:!0,sx:{my:2,color:"#aaa",borderColor:"#555",textTransform:"none"},children:[v?v.name:"Choose Image",(0,l.jsx)("input",{type:"file",hidden:!0,onChange:A})]}),(0,l.jsx)(d.A,{name:"price",label:"Price",control:c,errors:b}),(0,l.jsx)(d.A,{name:"dailyIncome",label:"Daily Income",control:c,errors:b}),(0,l.jsx)(d.A,{name:"fee",label:"Fee",control:c,errors:b}),(0,l.jsx)(d.A,{name:"rentalDays",label:"Rental Days",control:c,errors:b,type:"number"}),(0,l.jsxs)(i.A,{display:"flex",justifyContent:"space-between",mt:4,gap:2,children:[(0,l.jsx)(a.A,{variant:"contained",fullWidth:!0,sx:{bgcolor:"#7367F0",textTransform:"none"},onClick:p(y),disabled:!j,children:"Edit"}),(0,l.jsx)(a.A,{fullWidth:!0,sx:{color:"#a64445",textTransform:"none",bgcolor:"#3a2b2b"},onClick:D,children:"Discard"})]})]})}function j(){let{machines:e,handelSetEditValues:t,currentMachine:n}=(0,c.A)(),{product:r}=g();console.log("product: ",r);let[a,i]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1);return(0,l.jsx)("div",{className:"min-h-screen bg-black p-4 md:p-8",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,l.jsx)(o.A,{sx:{fontWeight:"bold",color:"white",fontSize:24},children:"Machine Management"}),(0,l.jsxs)("main",{className:"mt-10",children:[(0,l.jsx)(m.A,{buttonText:"Add machine",editProduct:!0,showHeader:!0,columns:[{id:"title",label:"Title"},{id:"rentalDays",label:"Rent Days"},{id:"price",label:"Price"}],data:e,onClick:()=>{i(!0)},onClick2:()=>u(!0)}),(0,l.jsx)(p,{machine:n,open:a,onClose:()=>i(!1)}),(0,l.jsx)(y,{open:d,onClose:()=>u(!1)})]})]})})}},58674:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(57515),r=n(95155);let o=(0,l.A)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},81453:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var l=n(95155),r=n(12115),o=n(62177),a=n(91819),i=n(33989),s=n(3127),d=n(81787),c=n(58674);let u=e=>{let{name:t,control:n,label:u,type:p="text",errors:m,multiline:x=!1,rows:f=4,rules:h}=e,[b,v]=(0,r.useState)(!1),A="password"===p,g=()=>{v(e=>!e)};return(0,l.jsx)(o.xI,{rules:h,name:t,control:n,render:e=>{var n;let{field:r}=e;return(0,l.jsx)(a.A,{...r,type:A&&!b?"password":"text",label:u,variant:"outlined",fullWidth:!0,margin:"normal",multiline:x,rows:x?f:void 0,error:!!(null==m?void 0:m[t]),helperText:null==m||null==(n=m[t])?void 0:n.message,InputLabelProps:{style:{color:"#aaa"}},InputProps:{style:{color:"#fff"},endAdornment:A&&(0,l.jsx)(i.A,{position:"end",children:(0,l.jsx)(s.A,{onClick:g,edge:"end",sx:{color:"#aaa"},children:b?(0,l.jsx)(d.A,{}):(0,l.jsx)(c.A,{})})})},sx:{backgroundColor:"#262626",borderRadius:"6px","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#444"},"&:hover fieldset":{borderColor:"#666"},"&.Mui-focused fieldset":{borderColor:"#888"}}}})}})}},81787:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(57515),r=n(95155);let o=(0,l.A)((0,r.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")}},e=>{var t=t=>e(e.s=t);e.O(0,[4182,2295,8534,958,2469,5871,9327,6757,8732,7017,7223,1819,5726,2939,9422,8441,1684,7358],()=>t(31027)),_N_E=e.O()}]);