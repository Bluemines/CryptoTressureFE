"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9422],{5289:(e,o,t)=>{t.d(o,{$U:()=>i,EI:()=>n,VF:()=>a,Vz:()=>s,zB:()=>l});var r=t(48718);let a={mutationFn:e=>(0,r.w)("products","POST",e.body)},n={mutationFn:e=>{let{id:o,body:t}=e;return(0,r.w)("products/".concat(o),"PATCH",t)}},s=()=>({queryKey:["machines"],queryFn:()=>(0,r.Z)("products")}),l=e=>({queryKey:["machine-".concat(e)],queryFn:()=>(0,r.Z)("products/".concat(e))}),i={mutationFn:e=>(console.log("id: ",e),(0,r.w)("products/".concat(e),"DELETE"))}},9422:(e,o,t)=>{t.d(o,{A:()=>D});var r=t(95155),a=t(53267),n=t(71116),s=t(68534),l=t(29267),i=t(18096),d=t(44296),c=t(18407),u=t(17976),p=t(56033),h=t(90404),x=t(64263),m=t(99776),A=t(41101),f=t(3127),g=t(63913),j=t(77894),b=t(24507),y=t(28890),v=t(69008),C=t(12115),S=t(9784),w=t(75793),T=t(35695);let F={Approved:"#28C76F",Pending:"#E46A11",Suspend:"#F04438",Success:"#28C76F",Failed:"#F04438"},k={Approved:"#274635",Pending:"#4c3422",Suspend:"#4f2c2a",Success:"#28C76F33",Failed:"#F0443833"},D=e=>{let{columns:o,data:t,total:D=100,rowsPerPage:E=5,icon1:P=!0,icon2:I=!0,title:q,onClick:N,actions:M=!0,showHeader:O=!1,buttonText:B,showSearch:R=!0,showButton:z=!0,editProduct:L=!1,onClick2:U,navUser:H}=e,V=(0,T.useRouter)(),{handleDeleteMachine:W,handelSetEditValues:Y}=(0,w.A)(),[$,_]=(0,C.useState)(1),[G,Z]=(0,C.useState)(""),[J,K]=(0,C.useState)("All"),[Q,X]=(0,C.useState)("All Time"),[ee,eo]=(0,C.useState)(!1),[et,er]=(0,C.useState)(!1),[ea,en]=(0,C.useState)(!1),[es,el]=(0,C.useState)(null),ei=e=>{el(e.currentTarget)},ed=()=>{el(null)},ec=!!es,eu=ec?"status-popover":void 0,ep=e=>{"Approved"===e&&eo(!0),"Suspended"===e&&er(!0),"Delete"===e&&en(!0),ed()};return(0,r.jsxs)(a.A,{sx:{bgcolor:"#1E1E1E",borderRadius:3,p:2},children:[(0,r.jsx)(n.A,{variant:"h6",color:"white",fontWeight:"bold",mb:2,children:q}),O?(0,r.jsx)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,gap:2,sx:{flexDirection:{xs:"column",md:"row"}},children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.A,{component:"input",placeholder:"Search here",sx:{flex:1,bgcolor:"#2B2B2B",color:"#fff",border:"1px solid #444",borderRadius:2,px:2,py:1,outline:"none","&::placeholder":{color:"#aaa"}}}),z&&(0,r.jsx)(s.A,{variant:"contained",startIcon:(0,r.jsx)("span",{style:{fontSize:20},children:"＋"}),sx:{bgcolor:"#7367F0",color:"#fff",textTransform:"none",fontWeight:"bold",borderRadius:2,px:3,"&:hover":{bgcolor:"#5e50ee"}},onClick:N,children:B})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.A,{}),(0,r.jsx)(s.A,{variant:"contained",startIcon:(0,r.jsx)("span",{style:{fontSize:20},children:"＋"}),sx:{bgcolor:"#7367F0",color:"#fff",textTransform:"none",fontWeight:"bold",borderRadius:2,px:3,"&:hover":{bgcolor:"#5e50ee"}},onClick:N,className:"flex self-end ",children:B})]})}):(0,r.jsxs)(a.A,{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:2,children:[(0,r.jsx)(l.A,{value:J,onChange:(e,o)=>K(o),textColor:"inherit",indicatorColor:"primary",variant:"scrollable",scrollButtons:"auto",sx:{flex:1},children:["All","Approved","Pending","Declined"].map(e=>(0,r.jsx)(i.A,{value:e,label:e,sx:{textTransform:"none",color:"white",bgcolor:J===e?"#7367F0":"transparent",borderRadius:2,px:2,minHeight:36}},e))}),(0,r.jsx)(l.A,{value:Q,onChange:(e,o)=>X(o),textColor:"inherit",indicatorColor:"primary",variant:"scrollable",scrollButtons:"auto",sx:{flex:1},children:["All Time","12 Months","30 Days","7 Days","24 Hour"].map(e=>(0,r.jsx)(i.A,{value:e,label:e,sx:{textTransform:"none",color:"white",bgcolor:Q===e?"#7367F0":"transparent",borderRadius:2,px:2,minHeight:36}},e))})]}),(0,r.jsx)(d.A,{component:c.A,sx:{background:"transparent"},children:(0,r.jsxs)(u.A,{children:[(0,r.jsx)(p.A,{children:(0,r.jsxs)(h.A,{children:[o.map(e=>(0,r.jsx)(x.A,{sx:{color:"#fff",borderBottom:"1px solid #333",fontWeight:600},children:e.label},e.id)),M&&(0,r.jsx)(x.A,{sx:{color:"#fff",borderBottom:"1px solid #333"},children:"Action"})]})}),(0,r.jsx)(m.A,{children:t.slice(($-1)*E,$*E).map(e=>(0,r.jsxs)(h.A,{sx:{"&:last-child td":{border:0}},children:[o.map(o=>(0,r.jsx)(x.A,{sx:{color:"#ddd"},children:"status"===o.id?(0,r.jsx)(A.A,{label:e[o.id],sx:{backgroundColor:k[e[o.id]]||"#888",color:F[e[o.id]]||"#888",fontWeight:500}}):e[o.id]},o.id)),M&&(0,r.jsxs)(x.A,{children:[P&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{onClick:ei,children:(0,r.jsx)(v.A,{sx:{color:"#A78BFA"}})}),(0,r.jsxs)(g.Ay,{id:eu,open:ec,anchorEl:es,onClose:ed,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[(0,r.jsx)(j.A,{onClick:()=>ep("Approved"),children:"Approved"}),(0,r.jsx)(j.A,{onClick:()=>ep("Suspended"),children:"Suspended"}),(0,r.jsx)(j.A,{onClick:()=>{ep("Delete"),Z(String(e.id))},children:"Delete"})]})]}),I&&(0,r.jsx)(f.A,{onClick:()=>{L?(Y(String(e.id)),U&&U()):H?V.push("/admin/usersManagement/details?id=".concat(e.id)):U&&U()},children:(0,r.jsx)(y.A,{sx:{color:"#A78BFA"}})})]})]},e.id))})]})}),(0,r.jsxs)(a.A,{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsxs)(n.A,{variant:"body2",color:"#aaa",children:["Showing ",Math.min(($-1)*E+1,D),"–",Math.min($*E,D)," from ",D]}),(0,r.jsx)(b.A,{count:Math.ceil(D/E),page:$,onChange:(e,o)=>{_(o)},sx:{"& .MuiPaginationItem-root":{color:"#fff",borderRadius:"8px",backgroundColor:"#2B2B2B"},"& .Mui-selected":{backgroundColor:"#7367F0",color:"#fff"}}})]}),(0,r.jsxs)(S.A,{open:ee,setOpen:eo,children:[(0,r.jsx)("div",{className:"text-lg font-medium",children:"Approve withdrawl?"}),(0,r.jsx)("div",{className:"text-[#A9A9A9] mt-4",children:"Do you want to approve withdrawal of $10 of User John Doe?"}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(s.A,{sx:{backgroundColor:"#008A3D",color:"#fff",marginTop:"22px",marginLeft:"auto"},children:"Confirm"})})]}),(0,r.jsxs)(S.A,{open:et,setOpen:er,children:[(0,r.jsx)("div",{className:"text-lg font-medium",children:"Suspend withdrawal?"}),(0,r.jsx)("div",{className:"text-[#A9A9A9] mt-4",children:"Do you want to Suspend withdrawal of $10 of User John Doe?"}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(s.A,{sx:{backgroundColor:"#F04438",color:"#fff",marginTop:"22px",marginLeft:"auto"},children:"Suspended"})})]}),(0,r.jsxs)(S.A,{open:ea,setOpen:en,children:[(0,r.jsx)("div",{className:"text-lg font-medium",children:"Delete Machine?"}),(0,r.jsx)("div",{className:"text-[#A9A9A9] mt-4",children:"Do you want to Delete the Machine?"}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(s.A,{sx:{backgroundColor:"#F04438",color:"#fff",marginTop:"22px",marginLeft:"auto"},onClick:async()=>{await W(G),en(!1)},children:"Delete"})})]})]})}},9784:(e,o,t)=>{t.d(o,{A:()=>l});var r=t(95155);t(12115);var a=t(53267),n=t(97328);let s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:450,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function l(e){let{open:o,setOpen:t,children:l,boxStyle:i}=e;return(0,r.jsx)(n.A,{open:o,onClose:()=>t(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",slotProps:{backdrop:{sx:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0,0,0,0.3)"}}},children:(0,r.jsx)(a.A,{sx:{...s,...i},children:l})})}},45516:(e,o,t)=>{t.d(o,{k:()=>a});var r=t(37129);let a=r.Ik({title:r.Yj().required("*Required"),description:r.Yj().required("*Required"),price:r.Yj().required("*Required"),dailyIncome:r.Yj().required("*Required"),fee:r.Yj().required("*Required"),rentalDays:r.ai().required("*Required and must be a number")})},48718:(e,o,t)=>{t.d(o,{w:()=>s,Z:()=>n});let r={accessToken:async()=>localStorage.getItem("accessToken")},a=t(23464).A.create({baseURL:"https://api.bluemines.xyz/",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, PATCH, OPTIONS"}});a.interceptors.request.use(async e=>{let o=await r.accessToken();return o&&(e.headers.Authorization="Bearer ".concat(o),e.headers["Access-Control-Allow-Origin"]="*",e.headers["Access-Control-Allow-Methods"]="GET, POST, PUT, DELETE, PATCH, OPTIONS"),e.data instanceof FormData?e.headers["Content-Type"]="multipart/form-data":e.headers["Content-Type"]="application/json",e.headers["Access-Control-Allow-Origin"]="*",e.headers["Access-Control-Allow-Methods"]="GET, POST, PUT, DELETE, PATCH, OPTIONS",e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,async e=>Promise.reject(e));let n=async(e,o)=>(await a.get(e,{params:o})).data,s=async(e,o,t,r)=>(await a.request({url:e,method:o,data:t,headers:{...r}})).data},75793:(e,o,t)=>{t.d(o,{A:()=>u});var r=t(12115),a=t(62177),n=t(45516),s=t(62461),l=t(5041),i=t(95838),d=t(5289);let c=(0,t(65453).v)(e=>({machines:[],setAllMachines:o=>e(()=>({machines:o})),addMachine:o=>e(e=>({machines:[...e.machines,o]})),deleteMachineById:o=>e(e=>({machines:e.machines.filter(e=>e.id!==o)}))}));function u(){let{control:e,handleSubmit:o,setValue:t,getValues:u,watch:p,reset:h,formState:{errors:x,isValid:m}}=(0,a.mN)({resolver:(0,s.t)(n.k),defaultValues:{title:"",description:"",price:"",dailyIncome:"",fee:"",rentalDays:0}}),{mutateAsync:A,isSuccess:f,isError:g,error:j}=(0,l.useMutation)({mutationFn:d.VF.mutationFn}),[b,y]=(0,r.useState)(""),[v,C]=(0,r.useState)(!1),S=async e=>{if(console.log("data:",e),!U){C(!0),y("Please uplaod an Image");return}try{y("");let{title:o,description:t,price:r,dailyIncome:a,fee:n,rentalDays:s}=e,l=new FormData;l.append("title",o),l.append("description",t),l.append("price",r),l.append("dailyIncome",a),l.append("fee",n),l.append("rentalDays",s),U&&l.append("image",U);let i=await A({body:l});console.log(i),!0===i.success&&(C(!0),y("Product Added Successfully")),!1===i.success&&(C(!0),y(i.success))}catch(e){C(!0),C(!0),y(e.message)}};console.log("all values: ",p());let{machines:w,setAllMachines:T,deleteMachineById:F}=c(),{data:k,isLoading:D,refetch:E,isError:P,isSuccess:I}=(0,i.useQuery)((0,d.Vz)()),q=()=>{if(I){var e;(null==k||null==(e=k.data)?void 0:e.items)&&T(k.data.items)}g&&(C(!0),y(j.message))};(0,r.useEffect)(()=>{k&&q()},[k]);let{mutateAsync:N}=(0,l.useMutation)({mutationFn:d.$U.mutationFn}),M=async e=>{try{let o=await N(e);F(Number(e)),console.log("delete: ",o)}catch(e){console.log("error: ",e)}},O=e=>w.find(o=>o.id===Number(e))||null,[B,R]=(0,r.useState)("");console.log(B);let[z,L]=(0,r.useState)(),U=p("image");return{control:e,errors:x,handleSubmit:o,selectedImage:U,handleImageSelect:e=>{var o;let r=null==(o=e.target.files)?void 0:o[0];r&&t("image",r)},handleAddMachine:S,isValid:m,message:b,setOpenToast:C,openToast:v,machines:w,handleDeleteMachine:M,handelSetEditValues:e=>{localStorage.removeItem("id");let o=O(e);localStorage.setItem("id",String(null==o?void 0:o.id))},currentMachineId:B,reset:h,currentMachine:z}}}}]);